<script>
  async function fetchPrediction() {
    try {
      const response = await fetch("https://ladder-proxy-production.up.railway.app/predict", {
        headers: { 'Accept': 'application/json' }
      });

      const text = await response.text();
      const data = JSON.parse(text);
      console.log("✅ JSON 파싱 결과:", data);

      document.getElementById("round").innerText =
        data["예측회차"] ? `🔁 예측 회차: ${data["예측회차"]}회차` : "❌ 예측 회차 없음";

      const leftContainer = document.getElementById("left");
      const rightContainer = document.getElementById("right");
      leftContainer.innerHTML = "";
      rightContainer.innerHTML = "";

      if (Array.isArray(data["앞방향_예측값"]) && data["앞방향_예측값"].length > 0) {
        data["앞방향_예측값"].forEach((value, i) => {
          const el = document.createElement("div");
          el.className = "result";
          el.innerText = `${i + 1}위: ${value}`;
          leftContainer.appendChild(el);
        });
      } else {
        leftContainer.innerText = "❌ 데이터 없음";
      }

      if (Array.isArray(data["뒤방향_예측값"]) && data["뒤방향_예측값"].length > 0) {
        data["뒤방향_예측값"].forEach((value, i) => {
          const el = document.createElement("div");
          el.className = "result";
          el.innerText = `${i + 6}위: ${value}`;
          rightContainer.appendChild(el);
        });
      } else {
        rightContainer.innerText = "❌ 데이터 없음";
      }

    } catch (error) {
      console.error("❌ 예측 불러오기 실패:", error);
      document.getElementById("round").innerText = "❌ 예측 결과 로드 실패";
      document.getElementById("left").innerText = "❌ 오류";
      document.getElementById("right").innerText = "❌ 오류";
    }
  }
</script>
