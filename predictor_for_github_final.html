<script>
  async function fetchPrediction() {
    try {
      const response = await fetch("https://ladder-proxy-production.up.railway.app/predict", {
        headers: { 'Accept': 'application/json' }
      });

      const text = await response.text();
      console.log("ğŸ“¦ RAW ì‘ë‹µ:", text);

      const data = JSON.parse(text);
      console.log("âœ… JSON íŒŒì‹± ê²°ê³¼:", data);

      document.getElementById("round").innerText = data.predict_round
        ? `ì˜ˆì¸¡ íšŒì°¨: ${data.predict_round}íšŒì°¨`
        : "ì˜ˆì¸¡ íšŒì°¨ ì—†ìŒ";

      const leftContainer = document.getElementById("left");
      const rightContainer = document.getElementById("right");

      leftContainer.innerHTML = "";
      rightContainer.innerHTML = "";

      if (Array.isArray(data.front_predictions) && data.front_predictions.length > 0) {
        data.front_predictions.forEach((value, i) => {
          const el = document.createElement("div");
          el.className = "result";
          el.innerText = `${i + 1}ìœ„: ${value}`;
          leftContainer.appendChild(el);
        });
      } else {
        leftContainer.innerText = "ë°ì´í„° ì—†ìŒ";
      }

      if (Array.isArray(data.back_predictions) && data.back_predictions.length > 0) {
        data.back_predictions.forEach((value, i) => {
          const el = document.createElement("div");
          el.className = "result";
          el.innerText = `${i + 6}ìœ„: ${value}`;
          rightContainer.appendChild(el);
        });
      } else {
        rightContainer.innerText = "ë°ì´í„° ì—†ìŒ";
      }

    } catch (err) {
      document.getElementById("round").innerText = "âŒ ì˜ˆì¸¡ ë°ì´í„° ë³´ê¸° ì˜¤ë¥˜";
      document.getElementById("left").innerText = "ë°ì´í„° ì—†ìŒ";
      document.getElementById("right").innerText = "ë°ì´í„° ì—†ìŒ";
      console.error("âŒ ì˜ˆì¸¡ ì˜¤ë¥˜:", err);
    }
  }
</script>
