<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>사다리 예측 시스템</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            padding: 40px;
        }
        h1 {
            font-size: 2em;
        }
        .section {
            margin-top: 30px;
        }
    </style>
</head>
<body>
    <h1>🍊 예측 실행</h1>
    <p>🗂️ 예측 회차: <span id="round">불러오는 중...</span></p>

    <div class="section">
        <h2>앞 기준 Top 5</h2>
        <ul id="front-list">
            <li>⏳ 데이터 불러오는 중...</li>
        </ul>
    </div>

    <script>
        async function fetchPredictions() {
            try {
                const response = await fetch("https://ladder-proxy-production.up.railway.app/predict");
                const result = await response.json();

                // 회차 표시
                const round = result.predict_round || "불명";
                document.getElementById("round").textContent = round + "회차";

                // 앞 기준 결과 표시
                const frontList = document.getElementById("front-list");
                frontList.innerHTML = "";

                if (result.front_predictions && result.front_predictions.length > 0) {
                    result.front_predictions.forEach((item, index) => {
                        const li = document.createElement("li");
                        li.textContent = `${index + 1}위: ${item}`;
                        frontList.appendChild(li);
                    });
                } else {
                    frontList.innerHTML = "<li>❌ 데이터 없음</li>";
                }

            } catch (error) {
                document.getElementById("round").textContent = "불러오기 실패";
                document.getElementById("front-list").innerHTML = "<li>❌ 오류 발생</li>";
                console.error("예측 요청 오류:", error);
            }
        }

        fetchPredictions();
    </script>
</body>
</html>
