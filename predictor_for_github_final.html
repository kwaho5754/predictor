<script>
  async function fetchPrediction() {
    try {
      const response = await fetch("https://ladder-proxy-production.up.railway.app/predict", {
        headers: { 'Accept': 'application/json' }
      });

      const text = await response.text();
      const data = JSON.parse(text);
      console.log("âœ… JSON íŒŒì‹± ê²°ê³¼:", data);

      document.getElementById("round").innerText =
        data["ì˜ˆì¸¡íšŒì°¨"] ? `ğŸ” ì˜ˆì¸¡ íšŒì°¨: ${data["ì˜ˆì¸¡íšŒì°¨"]}íšŒì°¨` : "âŒ ì˜ˆì¸¡ íšŒì°¨ ì—†ìŒ";

      const leftContainer = document.getElementById("left");
      const rightContainer = document.getElementById("right");
      leftContainer.innerHTML = "";
      rightContainer.innerHTML = "";

      if (Array.isArray(data["ì•ë°©í–¥_ì˜ˆì¸¡ê°’"]) && data["ì•ë°©í–¥_ì˜ˆì¸¡ê°’"].length > 0) {
        data["ì•ë°©í–¥_ì˜ˆì¸¡ê°’"].forEach((value, i) => {
          const el = document.createElement("div");
          el.className = "result";
          el.innerText = `${i + 1}ìœ„: ${value}`;
          leftContainer.appendChild(el);
        });
      } else {
        leftContainer.innerText = "âŒ ë°ì´í„° ì—†ìŒ";
      }

      if (Array.isArray(data["ë’¤ë°©í–¥_ì˜ˆì¸¡ê°’"]) && data["ë’¤ë°©í–¥_ì˜ˆì¸¡ê°’"].length > 0) {
        data["ë’¤ë°©í–¥_ì˜ˆì¸¡ê°’"].forEach((value, i) => {
          const el = document.createElement("div");
          el.className = "result";
          el.innerText = `${i + 6}ìœ„: ${value}`;
          rightContainer.appendChild(el);
        });
      } else {
        rightContainer.innerText = "âŒ ë°ì´í„° ì—†ìŒ";
      }

    } catch (error) {
      console.error("âŒ ì˜ˆì¸¡ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:", error);
      document.getElementById("round").innerText = "âŒ ì˜ˆì¸¡ ê²°ê³¼ ë¡œë“œ ì‹¤íŒ¨";
      document.getElementById("left").innerText = "âŒ ì˜¤ë¥˜";
      document.getElementById("right").innerText = "âŒ ì˜¤ë¥˜";
    }
  }
</script>
