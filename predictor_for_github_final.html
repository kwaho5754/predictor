<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì‚¬ë‹¤ë¦¬ ì˜ˆì¸¡</title>
</head>
<body>
    <h1>ðŸ”® ì˜ˆì¸¡ ì‹¤í–‰</h1>
    <button onclick="runPrediction()">ì˜ˆì¸¡ ì‹¤í–‰</button>
    <p id="predict-round"></p>
    <p id="result-1"></p>
    <p id="result-2"></p>
    <p id="result-3"></p>
    <p id="error-message" style="color: red;"></p>

    <script>
        async function runPrediction() {
            const result1 = document.getElementById("result-1");
            const result2 = document.getElementById("result-2");
            const result3 = document.getElementById("result-3");
            const round = document.getElementById("predict-round");
            const errorMsg = document.getElementById("error-message");

            result1.textContent = "";
            result2.textContent = "";
            result3.textContent = "";
            round.textContent = "";
            errorMsg.textContent = "";

            try {
                const response = await fetch("https://ladder-proxy-production.up.railway.app/recent-result");
                const data = await response.json();

                if (!data || !data.result || data.result.length < 3) {
                    throw new Error("ì˜ˆì¸¡ ë°ì´í„°ê°€ ë¶€ì¡±í•©ë‹ˆë‹¤.");
                }

                round.textContent = `ì˜ˆì¸¡ íšŒì°¨: ${data.predict_round}íšŒì°¨`;
                result1.textContent = `1ìœ„: ${data.result[0]}`;
                result2.textContent = `2ìœ„: ${data.result[1]}`;
                result3.textContent = `3ìœ„: ${data.result[2]}`;
            } catch (error) {
                errorMsg.textContent = `ì˜¤ë¥˜ ë°œìƒ: ${error}`;
            }
        }
    </script>
</body>
</html>
