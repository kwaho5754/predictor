<script>
  async function fetchPrediction() {
    try {
      const response = await fetch("https://ladder-proxy-production.up.railway.app/predict", {
        headers: { 'Accept': 'application/json' }
      });

      const text = await response.text();
      console.log("📦 RAW 응답:", text);

      const data = JSON.parse(text);
      console.log("✅ JSON 파싱 결과:", data);

      document.getElementById("round").innerText = data.predict_round
        ? `예측 회차: ${data.predict_round}회차`
        : "예측 회차 없음";

      const leftContainer = document.getElementById("left");
      const rightContainer = document.getElementById("right");

      leftContainer.innerHTML = "";
      rightContainer.innerHTML = "";

      if (Array.isArray(data.front_predictions) && data.front_predictions.length > 0) {
        data.front_predictions.forEach((value, i) => {
          const el = document.createElement("div");
          el.className = "result";
          el.innerText = `${i + 1}위: ${value}`;
          leftContainer.appendChild(el);
        });
      } else {
        leftContainer.innerText = "데이터 없음";
      }

      if (Array.isArray(data.back_predictions) && data.back_predictions.length > 0) {
        data.back_predictions.forEach((value, i) => {
          const el = document.createElement("div");
          el.className = "result";
          el.innerText = `${i + 6}위: ${value}`;
          rightContainer.appendChild(el);
        });
      } else {
        rightContainer.innerText = "데이터 없음";
      }

    } catch (err) {
      document.getElementById("round").innerText = "❌ 예측 데이터 보기 오류";
      document.getElementById("left").innerText = "데이터 없음";
      document.getElementById("right").innerText = "데이터 없음";
      console.error("❌ 예측 오류:", err);
    }
  }
</script>
